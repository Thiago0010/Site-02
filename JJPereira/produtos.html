




<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>JJPEREIRA Produtos Naturais - Catálogo</title>
 <style>
  /* RESET & BASE */
  
  * {
    box-sizing: border-box;
  }
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0; padding: 0;
    background: #f9faf7;
    color: #2c3e22;
  }
  h1, h2 {
    font-weight: 700;
  }
  a {
    color: inherit;
    text-decoration: none;
  }

  /* CONTAINER */
  .container {
    max-width: 1200px;
    margin: 2rem auto 4rem;
    padding: 0 1rem;
  }

  /* TÍTULO */
  header {
    text-align: center;
    margin-bottom: 2rem;
  }
  header h1 {
    font-size: 2.4rem;
    color: #6FBF8E !important;
  }

  /* GRID PRODUTOS */
  .products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill,minmax(260px,1fr));
    gap: 1.8rem;
  }

  /* CARD PRODUTO */
  .product-card {
    background: #fff;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgb(44 62 34 / 0.1);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    transition: box-shadow 0.3s ease;
  }
  .product-card:hover {
    box-shadow: 0 6px 20px rgb(44 62 34 / 0.25);
  }
  .product-image {
    width: 100%;
    aspect-ratio: 1 / 1;
    object-fit: cover;
    border-bottom: 1px solid #e6e6dc;
  }
  .product-info {
    padding: 1rem 1.2rem 1.4rem;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
  }
  .product-name {
    font-size: 1.15rem;
    margin-bottom: 0.4rem;
    font-weight: 700;
    color: #2a5d34;
    flex-grow: 1;
  }
  .product-price {
    font-size: 1.1rem;
    font-weight: 600;
    color: #4a7d2f;
    margin-bottom: 1rem;
  }
  .add-to-cart-btn {
    background: #4a7d2f;
    border: none;
    color: white;
    font-weight: 700;
    padding: 0.7rem;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  .add-to-cart-btn:hover {
    background: #3a6623;
  }

  /* CARRINHO FLUTUANTE */
  #cart {
    position: fixed;
    top: 80px;
    right: 20px;
    width: 320px;
    max-height: 80vh;
    background: #fff;
    border-radius: 10px;
    box-shadow: 0 6px 20px rgb(44 62 34 / 0.3);
    padding: 1rem;
    overflow-y: auto;
    z-index: 9999;
    font-size: 0.9rem;
    display: none;
    flex-direction: column;
  }
  #cart h2 {
    margin: 0 0 1rem 0;
    color: #2a5d34;
  }
  .cart-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.8rem;
    border-bottom: 1px solid #e6e6dc;
    padding-bottom: 0.5rem;
  }
  .cart-item-name {
    flex-grow: 1;
    font-weight: 600;
    color: #2a5d34;
  }
  .cart-item-qty {
    width: 50px;
    text-align: center;
    margin: 0 0.5rem;
  }
  .cart-item-qty input {
    width: 100%;
    padding: 0.2rem 0.3rem;
    border: 1px solid #b0c38e;
    border-radius: 4px;
    text-align: center;
  }
  .remove-btn {
    background: #c0392b;
    border: none;
    color: white;
    border-radius: 4px;
    padding: 0.2rem 0.5rem;
    cursor: pointer;
    font-weight: 700;
    transition: background-color 0.3s ease;
  }
  .remove-btn:hover {
    background: #922b23;
  }
  #cart-total {
    margin-top: 1rem;
    font-weight: 700;
    color: #3a6623;
    text-align: right;
  }
  #checkout-btn {
    margin-top: 1rem;
    background: #2a5d34;
    color: white;
    border: none;
    padding: 0.8rem;
    font-weight: 700;
    border-radius: 8px;
    cursor: pointer;
    width: 100%;
    transition: background-color 0.3s ease;
  }
  #checkout-btn:hover {
    background: #1f4125;
  }

  /* BOTÃO FLUTUANTE WHATSAPP */
  #whatsapp-float {
    position: fixed;
    bottom: 25px;
    right: 25px;
    background: #25d366;
    border-radius: 50%;
    width: 56px;
    height: 56px;
    box-shadow: 0 4px 15px rgba(37, 211, 102, 0.4);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 10000;
  }
  #whatsapp-float svg {
    width: 28px;
    height: 28px;
    fill: white;
  }

  /* RESPONSIVO */
  @media (max-width: 768px) {
    #cart {
      position: fixed;
      bottom: 0;
      right: 0;
      width: 100%;
      max-height: 50vh;
      border-radius: 16px 16px 0 0;
    }
    .products-grid {
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 1rem;
    }
  }
  
/* HEADER */
header{
  position:sticky;
  top:0;
  background:#fff;
  box-shadow:0 2px 10px rgba(0,0,0,.05);
  z-index:10;
}

.nav{
  max-width:1200px;
  margin:auto;
  padding:15px 20px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.logo{
  font-family:'Playfair Display',serif;
  font-size:22px;
  color:var(--verde);
}

.nav ul{
  list-style:none;
  display:flex;
  gap:30px;
}

.nav a{
  text-decoration:none;
  color:var(--cinza);
  font-weight:500;
}

.cart-btn{
  background:var(--verde);
  color:#fff;
  padding:8px 16px;
  border-radius:20px;
  cursor:pointer;
  font-size:14px;
}

/* HERO */
.internal-hero{
  background:linear-gradient(rgba(31,94,59,.85),rgba(31,94,59,.85)),
  url('https://images.unsplash.com/photo-1498837167922-ddd27525d352') center/cover;
  padding:80px 20px;
  color:#fff;
  text-align:center;
}

.internal-hero h1{
  font-family:'Playfair Display',serif;
  font-size:42px;
}

.logo {
  font-family:'Playfair Display', serif;
  font-size:22px;
  font-weight:700;
  color:var(--verde-escuro);
}
 </style> 




</head>
<body>


<header>
  <div class="nav">
    <div class="logo">JJPEREIRA</div>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="produtos.html">Produtos</a></li>
   
    </ul>
  </div>
</header>

<section class="internal-hero">
  <h1>Nossos Produtos</h1>
  <p>Escolha, adicione ao carrinho e finalize com facilidade</p>
</section>

<main class="container">
  <section class="products-grid" id="products"></section>
</main>

<!-- CARRINHO -->
<aside id="cart">
  <h2>Seu Carrinho</h2>
  <div id="cart-items"></div>
  <div id="cart-total"></div>
  <button id="checkout-btn">Finalizar Compra via WhatsApp</button>
</aside>

<!-- BOTÃO FLUTUANTE WHATSAPP -->
<div id="whatsapp-float" title="Abrir WhatsApp" style="display:none;">
  <svg viewBox="0 0 24 24" aria-hidden="true">
    <path d="M20.52 3.48A11.87 11.87 0 0012 0C5.373 0 0 5.372 0 12c0 2.115.557 4.09 1.52 5.845L0 24l6.446-1.49A11.944 11.944 0 0012 24c6.627 0 12-5.372 12-12 0-3.214-1.254-6.228-3.48-8.52zM12 21.375c-1.94 0-3.83-.56-5.43-1.61l-.39-.23-3.833.885.815-3.736-.25-.39A9.286 9.286 0 012.7 12c0-5.16 4.2-9.375 9.3-9.375 2.48 0 4.81.95 6.57 2.69 1.75 1.75 2.69 4.06 2.69 6.57 0 5.16-4.21 9.375-9.3 9.375z"></path>
  </svg>
</div>

<script>
const API_URL = 'https://script.google.com/macros/s/AKfycbyjtcOZAVSuQ7cX-fF63la8NjlN5M9WT4T7-A8RwSqTrXFJ50ij3P2i4Z7ycky0jwwz/exec'; // sua API Google Sheets

let products = [];
let cart = {};

// Função para formatar preço em R$
function formatPrice(price) {
  return price.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
}

// Buscar produtos da API
async function fetchProducts() {
  try {
    const res = await fetch(API_URL);
    products = await res.json();
    renderProducts();
  } catch (e) {
    console.error('Erro ao carregar produtos:', e);
    document.getElementById('products').innerHTML = '<p>Erro ao carregar produtos. Tente novamente mais tarde.</p>';
  }
}

// Renderizar produtos na tela
function renderProducts() {
  const container = document.getElementById('products');
  container.innerHTML = '';
  products.forEach(p => {
    const card = document.createElement('article');
    card.className = 'product-card';
    card.innerHTML = `
      <img class="product-image" src="${p.imagem}" alt="${p.nome}" loading="lazy" />
      <div class="product-info">
        <h3 class="product-name">${p.nome}</h3>
        <div class="product-price">${formatPrice(Number(p.preco))}</div>
        <button class="add-to-cart-btn" data-id="${p.id}">Adicionar ao carrinho</button>
      </div>
    `;
    container.appendChild(card);
  });

  // Eventos dos botões adicionar ao carrinho
  document.querySelectorAll('.add-to-cart-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      addToCart(btn.dataset.id);
    });
  });
}

// Adicionar produto ao carrinho
function addToCart(id) {
  const product = products.find(p => p.id == id);
  if (!product) return;
  if (cart[id]) {
    cart[id].qty += 1;
  } else {
    cart[id] = { ...product, qty: 1 };
  }
  updateCart();
}

// Atualizar visual do carrinho
function updateCart() {
  const cartEl = document.getElementById('cart');
  const itemsEl = document.getElementById('cart-items');
  const totalEl = document.getElementById('cart-total');

  // Mostrar carrinho se tiver itens
  cartEl.style.display = Object.keys(cart).length ? 'flex' : 'none';

  itemsEl.innerHTML = '';
  let total = 0;

  Object.values(cart).forEach(item => {
    total += Number(item.preco) * item.qty;
    const itemEl = document.createElement('div');
    itemEl.className = 'cart-item';
    itemEl.innerHTML = `
      <span class="cart-item-name">${item.nome}</span>
      <input type="number" min="1" value="${item.qty}" class="cart-item-qty" data-id="${item.id}" />
      <button class="remove-btn" data-id="${item.id}">&times;</button>
    `;
    itemsEl.appendChild(itemEl);
  });

  totalEl.textContent = 'Total: ' + formatPrice(total);

  // Eventos para mudar quantidade
  itemsEl.querySelectorAll('.cart-item-qty').forEach(input => {
    input.addEventListener('change', e => {
      const id = e.target.dataset.id;
      const qty = Number(e.target.value);
      if (qty <= 0) {
        delete cart[id];
      } else {
        cart[id].qty = qty;
      }
      updateCart();
    });
  });

  // Eventos para remover item
  itemsEl.querySelectorAll('.remove-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      delete cart[btn.dataset.id];
      updateCart();
    });
  });
}

// Finalizar compra via WhatsApp
function checkout() {
  if (!Object.keys(cart).length) {
    alert('Seu carrinho está vazio!');
    return;
  }

  const phoneNumber = '5561986192952'; // Troque pelo número oficial da sua empresa, com DDI+DDD sem sinais

  let message = `Olá! Gostaria de fazer o pedido:\n\n`;

  Object.values(cart).forEach(item => {
    message += `- ${item.nome} x${item.qty} = ${formatPrice(Number(item.preco)*item.qty)}\n`;
  });

  const total = Object.values(cart).reduce((acc, item) => acc + Number(item.preco)*item.qty, 0);

  message += `\nTotal: ${formatPrice(total)}\n\nObrigado!`;

  const url = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;

  window.open(url, '_blank');
}

// Eventos
document.getElementById('checkout-btn').addEventListener('click', checkout);

// Exibir botão WhatsApp fixo quando carrinho aberto
const whatsappFloat = document.getElementById('whatsapp-float');

function toggleWhatsappFloat() {
  whatsappFloat.style.display = Object.keys(cart).length ? 'flex' : 'none';
}

const originalUpdateCart = updateCart;
updateCart = function() {
  originalUpdateCart();
  toggleWhatsappFloat();
};

fetchProducts();
</script>

</body>
</html>
